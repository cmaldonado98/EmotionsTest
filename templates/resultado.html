{% load static %} {% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emotions Test</title>
  <link rel="shortcut icon" href="{% static 'img/LOGO_PROTEINS.png' %}" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
  <!-- Notiflix -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notiflix@3.2.2/dist/notiflix-3.2.2.min.css">
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light border-bottom border-light py-0">
    <div class="container-fluid">
      <a href="https://superfoodproteins.com" class="navbar-brand">
        <img src="{% static 'img/LOGO_PROTEINS.png' %}" alt="Logo" style="width: 7rem; height: 3.5rem;">
      </a>

      <ul class="navbar-nav align-items-center ms-auto">
        <li class="nav-item">
          <a href="{% url 'crearPersona' %" class="btn btn-primary rounded-pill nav-link">
            <span class="text-white">
              <i class="bi bi-house"></i>
              Inicio
            </span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <main class="container">
    <div class="row justify-content-between align-items-center mt-5">
      <div class="col-auto">
        <h1 class="mb-0">Datos del usuario</h1>
      </div>

      <div class="col-auto">
        <h5 class="mb-0">Resultado {{ persona.id }}</h5>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-12">
        <h6 class="text-dark">
          {{ persona.nombre }} {{ persona.apellido }}
          &bull;&nbsp;{{ persona.edad }} años
        </h6>
        <div class="text-muted">
          {{ persona.correo }}
        </div>
        <div class="text-muted">
          {{ persona.sexo }}
        </div>
      </div>
    </div>

    <div class="row justify-content-between align-items-center mt-4">
      <div class="col-auto">
        <button class="btn btn-primary rounded-pill py-2 px-3" onclick="getData()">
          <span class="text-white">
            Obtener
          </span>
        </button>
      </div>

      <div class="col-auto">
        <div class="dropdown">
          <button class="btn btn-primary rounded-pill py-2 px-3 dropdown-toggle text-white" type="button" id="exportar"
            data-bs-toggle="dropdown" aria-expanded="false">
            <span>Exportar</span>
          </button>

          <ul class="dropdown-menu" aria-labelledby="exportar">
            <li>
              <a class="dropdown-item" download="datos.xlsx" href="#" onclick="downloadDocument(event, 'xls')">
                Excel file
              </a>
            </li>
            <li>
              <a class="dropdown-item" download="datos.xls" href="#" onclick="downloadDocument(event, 'excel')">
                XLS File
              </a>
            </li>
            <li>
              <a class="dropdown-item" download="datos.csv" href="#" onclick="downloadDocument(event, 'csv')">
                CSV File
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="card card-body p-0 shadow-sm mt-4 mb-5 mx-lg-5 ">
          <div class="table-responsive">
            <table class="table table-bordered border-primary table-striped text-center mb-0" id="tblData">
              <thead>
                <tr class="border-bottom border-primary">
                  <th># Test</th>
                  <th>Cod. Imagen</th>
                  <th>Resultado</th>
                  <th>Tiempo</th>
                  <th>Calificación</th>
                  <th>Pregunta</th>
                  <th>Validar</th>
                </tr>
              </thead>

              <tbody class="border-top-0">
                <tr style="--bs-table-striped-bg: rgba(var(--bs-primary-rgb), .25);">
                  <td colspan="99">
                    <h6 class="text-warning text-center">
                      Presiona obtener para buscar
                    </h6>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/excellentexport@3.4.3/dist/excellentexport.min.js">
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous">
    </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous">
    </script>

  <!-- Notiflix -->
  <script src="https://cdn.jsdelivr.net/npm/notiflix@3.2.2/dist/notiflix-aio-3.2.2.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.min.js"
    integrity="sha512-W/mRQs9ZSFpF14X/4aRgQss7+HRsVXsph+Y6DGLeqIqK8IpO+rQz0ISUEXkTeeKF7tivoGv+Ru7SpocS/1qahg=="
    crossorigin="anonymous" referrerpolicy="no-referrer">
    </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"
    integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer">
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/TableExport/5.2.0/js/tableexport.min.js"
    integrity="sha512-XmZS54be9JGMZjf+zk61JZaLZyjTRgs41JLSmx5QlIP5F+sSGIyzD2eJyxD4K6kGGr7AsVhaitzZ2WTfzpsQzg=="
    crossorigin="anonymous" referrerpolicy="no-referrer">
    </script>

  <script>
    window.personaId = "{{ persona.id }}";
  </script>

  <script src="{% static 'js/resultado.js' %}"></script>
</body>

</html>
